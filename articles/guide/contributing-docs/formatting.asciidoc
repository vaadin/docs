---
title: Formatting with AsciiDoc
order: 6
layout: page
---

= Formatting Vaadin Documentation With AsciiDoc

This document describes basic styling of Vaadin AsciiDoc documentation.

== Images

=== Image Basics

Images include screenshots and diagrams.
They should always have a caption and an ID, unless inside a step-by-step list.
The ID should follow the ID hierarchy of the containing section.
It should be prefixed with `figure.`.
Images can be referenced from text.

[source, AsciiDoc]
----
<<figure.images.example>> shows the result.

[[figure.images.example]]
.An example of an image
image::images/mymodule-example.png[width=70%, scaledwidth=100%]
----

It would render as:

[subs="normal"]
====
<<figure.images.example>> shows the result.

[[figure.images.example]]
.An example of an image
image::img/vaadin-logo.png[width=50%, scaledwidth=60%]
====

Images should be located under an [filename]#images# sub-folder.

=== Inline Images

You can display images also inline, without an image frame and caption.
This is recommended in task lists with screenshots, and in other cases where a caption is not needed and an image frame might be distracting.
To do so, have only one colon in `image:`.

For example:

[source, AsciiDoc]
----
. Click the button.
. The image should now look as follows:
image:images/example-image.png[width=30%]
----

// This doesn't work for some reason.
// It does make the other error around line 200 go away.

pass:[<!-- vale Vale.Terms = NO -->]

It would render as:

====
. Click the button.
. The image should now look as follows:
image:img/vaadin-logo.png[width=30%]
====

pass:[<!-- vale Vale.Terms = YES -->]

=== Image Captions

An image caption should not be in title case.

References to images use the caption text in the reference.
However, it is used differently in Vaadin Docs and the print edition.

The website shows it in the link.

[subs="normal"]
====
See the result in <<figure.images.example>>.
====

In print or PDF version, the reference includes "_Figure x.x <caption>_", with the chapter number and figure number in the chapter.

[example]
====
See the result in Figure 1.1, "An example of an image".
====

=== Requirements for Illustrations

Illustrations have the following requirements:

_Always use white background_::
Paper is white. +
When taking screenshots, use a white background when necessary.
Make sure the white background does not get transparent when taking screenshots.

_Do not use transparency in images_::
PNG and GIF images allow transparency.
While they may show fine in the website, in PDF the transparent parts are rendered as black.
This makes them ugly.

_Use high resolution for screenshots_::
Otherwise, pixels show up ugly when the images are scaled.
You can use the browser zoom feature to enlarge Vaadin UIs.
Scale the images as described in <<contributing.formatting.image.scaling>>.

_Minimize screenshot content_::
Space is precious in the print edition. +
Select only the relevant area for the screenshot.
Sometimes, adding some cut context may clarify the screenshot.
Some views or dialog windows can be overly complex or large.
You should consider simplifying them with an image editor.
You can use PhotoShop or Gimp or whatever.

_Fonts must not be too small_::
The text column in the print edition is 82 mm (3.23 inches) wide.
Height of the normal font is 2 mm or 6 points (1/72").
That means around 1/40 of the text column width.
Text in diagrams should not be much smaller than this.
If text is less than half of this, it is unreadable.
+
For example, if an image is 800 pixels wide and scaled as 100%, the normal font should be 20 pixels high.
Text would have to be at least 10 pixels high, and anything smaller would anyhow be blurry.

[[contributing.formatting.image.scaling]]
=== Image Scaling

Images are displayed in at least three formats: website, pocket-book sized print edition, and large size PDF.
There could also be an ePub format.
All images need to be scaled for all these resolutions.

AsciiDoc has two scaling parameters: `width` and `scaledwidth`.

 image::img/mymodule[width=70%, scaledwidth=100%]

`width` (optional)::
 This parameter is used for the HTML web edition in Vaadin Docs.
 The images are automatically limited to the maximum width of the text area.

`scaledwidth`::
This parameter is used for the print and PDF editions.
It is used as is for the pocket-size edition.
For the large PDF edition, it is multiplied by 0.8, as otherwise the images intended for the print edition would get too large.

[[code]]
== Code Blocks

You can display program or other text formatted in monospace letters in a box separated with `----`.

====
For example:
----
  ----
  Button button = new Button("My Button");
  ----
----

It would render as:

----
Button button = new Button("My Button");
----
====

[[code.file-types]]
=== Source File Types

AsciiDoc supports syntax highlighting for various languages.

====
For example:

----
  [source, java]
  ----
  Button button = new Button("My Button");
  ----
----

It would render as:

[source, java]
----
Button button = new Button("My Button");
----
====

=== Inline Examples

Certain technical examples must be unique, so you can't use `include::` described later.
For example, examples about annotations like [classname]#@Theme# that can only be defined for a single class in an application can't be inline.
Vaadin Docs examples run in a single Vaadin application, so they can't have more unique definitions.

[[code.include]]
=== Use Include for Java and TypeScript Code

You should write the code examples in Java or TypeScript files that are compiled.
These are located in the source tree under [filename]#src/main/java/com/vaadin/demo# for Java and `frontend/demo` for TypeScript.

The source tree is organized as follows:

[source, filesystem]
----
docs/
├── articles/           AsciiDoc content
├── frontend/
│   └── demo/
│       ├── component/  Vaadin component examples in TypeScript
│       ├── domain/     General definitions <1>
│       ├── fusion/     TypeScript UI examples
│       └── flow/       TypeScript counterparts of Java examples <2>
└── src/
    └── main/java/com/vaadin/demo/ Java examples
        ├── component/  Vaadin component examples in Java
        ├── domain/     General definitions <1>
        ├── flow/       Java UI examples
        └── fusion/     Java backends for Fusion TypeScript examples
----
<1> The general definitions include things like domain objects for example data used in the examples.
<2> See <<code.single.typescript-counterparts, Live Java examples require TypeScript counterpart>>.

Use `include::` to include them in code blocks as follows:

[source, AsciiDoc]
----
  [source,java]
  ----
  include::{root}/src/main/java/com/vaadin/demo/flow/application/events/EventsLambda.java[tags=snippet,indent=0]
  ----
----

The `tags` parameter specifies a tag from where to extract the source code shown in the listing.

The source code has a class with a constructor as follows:

[source]
----
public EventsLambda() {
    // tag::snippet[]
    Button button = new Button("Click me!",
      event -> event.getSource().setText("Clicked!!!"));
    add(button);
    // end::snippet[]
}
----

The above example shows as follows:

[source,java]
----
include::{root}/src/main/java/com/vaadin/demo/flow/application/events/EventsLambda.java[tags=snippet,indent=0]
----

==== Listing Multiple Files in a Code Box

You can have multiple files in a listing box if you specify them inside an example block.
This is a good practice to show UI file, a data model, and some resource files.

====
[source, AsciiDoc]
----
  [.example]
  --
  [source,java]
  ----
  include::{root}/src/main/java/com/vaadin/demo/flow/application/events/EventsLambda.java[tags=snippet,indent=0]
  ----

  [source,java]
  ----
  include::{root}/src/main/java/com/vaadin/demo/flow/application/events/EventsAnon.java[tags=snippet,indent=0]
  ----
  --
----

The above looks as follows:

[.example]
--
[source,java]
----
include::{root}/src/main/java/com/vaadin/demo/flow/application/events/EventsLambda.java[tags=snippet,indent=0]
----

[source,java]
----
include::{root}/src/main/java/com/vaadin/demo/flow/application/events/EventsAnon.java[tags=snippet,indent=0]
----
--
====

[[code.include.parameters]]
==== Include Parameters

The `include::` statement has the following parameters:

`render`::
Renders a live example.
A live example of a Java class requires that it has a [classname]#DemoExporter# implementation as a static subclass.

`hidden`::
Hides the example.
This is necessary for TypeScript counterparts of Java examples, which are only included to load component styles, as described in <<code.single.typescript-counterparts, Live Java Examples Require TypeScript Counterpart>>.

`tags=<name>`::
Specifies tags for extracting a source code snippets.
You can give multiple tags separated by semicolons or `tags=*` to show all tag content.
For a convention, you should use `snippet` for a single snippet.
+
The tags in source files are like `tag::<name>[]`.
The tags must be in code comments: `//` or `/* ... */` in Java and TypeScript and `<!-- ... -->` in HTML in TypeScript.

`indent=<spaces>`::
What is the indentation of the code inside the listing.
Without the parameter, the indentation in the source listing is used.
You should use `indent=0`.

`group=<name>`::
Groups the file under a group tab.
You should use this for language groups, such as `group=Java` and `group=TypeScript` in corresponding include statements.
You should not use it if you only have a single group, as it would show an unnecessary tab.

[[code.live]]
=== Live Examples

An example is rendered live if the `include::` statement contains a `render` attribute.
You also need to contain the example in a `[.example]` style block.
The optional `.show-code` style shows the code automatically.
Otherwise the reader needs to click to open it.

.An example block containing a live example
====
[source, AsciiDoc]
----
  [.example]
  --
  Here is optional text to describe the Java example.
  You could mention things like the [classname]#Button# class.

  [source,java]
  ----
  include::{root}/src/main/java/com/vaadin/demo/flow/application/events/EventsBasic.java[render,tags=snippet,indent=0,group=Java]
  ----

  Here is optional text to describe the TypeScript example.
  You could mention things like the [methodname]#render()# method.

  [source,typescript]
  ----
  include::{root}/frontend/demo/flow/application/events/events-basic.ts[render, indent=0, group=TypeScript]
  ----
  --
----

A Java class used to render a live example requires an inner static demo exporter implementation class, such as in the following:

[source, Java]
----
@Route("application-events-lambda")
public class EventsLambda extends Div {
    ...

    public static class Exporter extends DemoExporter<EventsLambda> { // hidden-full-source-line
    } // hidden-full-source-line    
}
----

The full listing does not show the lines marked with `// hidden-full-source-line` when you toggle *Expand code*.

The above example renders as follows:

[.example]
--
Here is optional text to describe the Java example.
You could mention things like the [classname]#Button# class.

[source,java]
----
include::{root}/src/main/java/com/vaadin/demo/flow/application/events/EventsBasic.java[render,tags=snippet,indent=0,group=Java]
----

Here is optional text to describe the TypeScript example.
You could mention things like the [methodname]#render()# method.

[source,typescript]
----
include::{root}/frontend/demo/flow/application/events/events-basic.ts[render, tags=snippet, indent=0, group=TypeScript]
----
--
====

==== Example Box Styles

As shown above, an example box shows live and multi-language examples with source code.
The following styles control its behaviour:

`example`::
The basic example box style.

`show-code`::
Automatically shows the code listing.
It is by default initially closed.

`render-only`::
Do not show code listing at all.
+
Notice that this does not disable the language group tabs.
An example box shows them if the include statement has the `group` parameter.


=== Single-Language Examples

You can have examples only in one language.
In such case, you should leave the `group` parameter out, as otherwise the example has an unnecessary group tab.

[[code.single.typescript-counterparts]]
==== Live Java Examples Require TypeScript Counterpart

Styles for any components that are used in an example are only loaded for TypeScript examples.
You therefore always need a TypeScript counterpart for any Java example.
Otherwise, the components are not styled and the example appears broken.
The TypeScript example does not need to be functional, just contain the needed components.

The example should not have a `group` parameter, and the TypeScript example should have parameter `hidden` instead of `render`.

=== Code Formatting Conventions

You should keep line length at maximum of around 63 characters.

== AsciiDoc Resources

* http://asciidoctor.org/docs/asciidoc-syntax-quick-reference/[AsciiDoc Syntax Quick Reference]

* http://asciidoctor.org/docs/asciidoc-writers-guide/[AsciiDoc Writer's Guide]

* http://asciidoctor.org/docs/user-manual/[AsciiDoctor Manual]
