---
title: Flow
page-title: How to add a Flow login view to a Vaadin application
meta-description: Learn to create a secure login view in Vaadin Flow using Spring Security. This guide covers authentication setup, in-memory authentication, and best practices.
order: 5
---


= Flow Login
:toclevels: 2

In this guide, you'll learn how to create a login view using Vaadin Flow. A hands-on mini-tutorial at the end will walk you through *enabling Spring Security*, setting up *in-memory authentication*, and integrating a login form into a real Vaadin application.

.Never Use Hard-Coded Credentials In Production
[WARNING]
In-memory authentication is convenient for development, but production applications must use a more secure approach, such as *JDBC authentication*, *LDAP authentication*, or *OAuth 2.0*. Refer to the https://docs.spring.io/spring-security/reference/servlet/authentication/index.html[Spring Security Reference Manual] for more details.


== The Login View

The login view is a standard <<../../views/add-view/flow#,Vaadin Flow view>>. The easiest way to implement one is by using the <<{articles}/components/login#,LoginForm>> component:

.LoginView.java
[source,java]
----
@Route(value = "login", autoLayout = false) // <1>
@PageTitle("Login")
@AnonymousAllowed // <2>
public class LoginView extends Main implements BeforeEnterObserver {

    private final LoginForm login;

    public LoginView() {
        login = new LoginForm();
        login.setAction("login"); // <3>

        VerticalLayout layout = new VerticalLayout();
        layout.setAlignItems(FlexComponent.Alignment.CENTER);
        layout.setJustifyContentMode(FlexComponent.JustifyContentMode.CENTER);
        layout.add(login);
        layout.setSizeFull();

        add(layout);
        setSizeFull();
    }

    @Override
    public void beforeEnter(BeforeEnterEvent event) {
        if (event.getLocation()
                 .getQueryParameters()
                 .getParameters()
                 .containsKey("error")) {
            login.setError(true); // <4>
        }
    }
}
----
<1> Disables auto layout to prevent the login view from being embedded in a <<../../views/add-router-layout#,router layout>>.
<2> Allows anonymous access so users can access the login page without authentication.
<3> Instructs the login form to send a `POST` request to `/login` for authentication.
<4> Handles login failures by checking for the `?error` query parameter and displaying an error message.

Spring Security's *form login* mechanism automatically processes authentication requests sent to `/login`. When authentication fails, the user is redirected back to the login page with `?error`, which the login view handles.

[TIP]
If your application's root package is `com.example.application`, place the login view inside: `com.example.application.security.ui.view`


== Configuration

To instruct Spring Security to use your login view, modify your security configuration:

.`SecurityConfig.java`
[source,java]
----
@EnableWebSecurity
@Configuration
class SecurityConfig {

    @Bean
    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
        // Configure Vaadin's security using VaadinSecurityConfigurer
        http.with(VaadinSecurityConfigurer.vaadin(), configurer -> {
// tag::snippet[]
            configurer.loginView(LoginView.class);
// end::snippet[]
        });

        return http.build();
    }
    ...
}
----

Now, when a user tries to access the application, they'll be redirected to the login page.

[IMPORTANT]
By default, Vaadin *restricts access to Flow views and router layouts*. Unless explicitly permitted, even authenticated users will be unable to access views. This is covered in more detail in the <<../protect-views#,Protect Views>> guide.


[.collapsible-list]
== Try It

In this mini-tutorial, you'll enable security and add a login form to a real Vaadin application. This serves as a foundation for future *security-related mini-tutorials*.


.Set Up the Project
[%collapsible]
====
First, generate a new application at http://start.vaadin.com[start.vaadin.com], <</getting-started/dev-environment/import#,open>> it in your IDE, and <</getting-started/dev-environment/run#,run>> it with hotswap enabled.

[NOTE]
Security configuration changes may require a *manual restart* for them to take effect. Hotswap may not be enough.

====


.Add the Spring Security Dependency
[%collapsible]
====
Add the following Spring Security dependency to `pom.xml`:

[source,xml]
----
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-security</artifactId>
</dependency>
----
====


.Create the Security Configuration Class
[%collapsible]
====
Create a new package: [packagename]`[application package].security`

Inside this package, create a [classname]`SecurityConfig` class:

.`SecurityConfig.java`
[source,java]
----
import com.vaadin.flow.spring.security.VaadinSecurityConfigurer;
import org.slf4j.LoggerFactory;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.core.userdetails.User;
import org.springframework.security.provisioning.InMemoryUserDetailsManager;
import org.springframework.security.provisioning.UserDetailsManager;
import org.springframework.security.web.SecurityFilterChain;

@EnableWebSecurity
@Configuration
class SecurityConfig {

    @Bean
    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
        // Configure Vaadin's security using VaadinSecurityConfigurer
        http.with(VaadinSecurityConfigurer.vaadin(), configurer -> {
        });

        return http.build();
    }

    @Bean
    public UserDetailsManager userDetailsManager() {
        LoggerFactory.getLogger(SecurityConfig.class)
            .warn("Using in-memory user details manager!");
        var user = User.withUsername("user")
                .password("{noop}user")
                .roles("USER")
                .build();
        var admin = User.withUsername("admin")
                .password("{noop}admin")
                .roles("ADMIN")
                .build();
        return new InMemoryUserDetailsManager(user, admin);
    }
}
----

====


.Create the Login View
[%collapsible]
====
Create a new package: [packagename]`[application package].security.ui`

Inside this package, create a [classname]`LoginView` class:

.LoginView.java
[source,java]
----
import com.vaadin.flow.component.html.Main;
import com.vaadin.flow.component.login.LoginForm;
import com.vaadin.flow.component.orderedlayout.FlexComponent;
import com.vaadin.flow.component.orderedlayout.VerticalLayout;
import com.vaadin.flow.router.BeforeEnterEvent;
import com.vaadin.flow.router.BeforeEnterObserver;
import com.vaadin.flow.router.PageTitle;
import com.vaadin.flow.router.Route;
import com.vaadin.flow.server.auth.AnonymousAllowed;

@Route(value = "login", autoLayout = false)
@PageTitle("Login")
@AnonymousAllowed
public class LoginView extends Main implements BeforeEnterObserver {

    private final LoginForm login;

    public LoginView() {
        login = new LoginForm();
        login.setAction("login");

        VerticalLayout layout = new VerticalLayout();
        layout.setAlignItems(FlexComponent.Alignment.CENTER);
        layout.setJustifyContentMode(FlexComponent.JustifyContentMode.CENTER);
        layout.add(login);
        layout.setSizeFull();

        add(layout);
        setSizeFull();
    }

    @Override
    public void beforeEnter(BeforeEnterEvent event) {
        if (event.getLocation()
                 .getQueryParameters()
                 .getParameters()
                 .containsKey("error")) {
            login.setError(true);
        }
    }
}
----
====


.Update the Spring Security Configuration
[%collapsible]
====
Modify [classname]`SecurityConfig` to reference the `LoginView`:

.`SecurityConfig.java`
[source,java]
----
@EnableWebSecurity
@Configuration
class SecurityConfig {

    @Bean
    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
        // Configure Vaadin's security using VaadinSecurityConfigurer
        http.with(VaadinSecurityConfigurer.vaadin(), configurer -> {
// tag::snippet[]
            configurer.loginView(LoginView.class);
// end::snippet[]
        });

        return http.build();
    }
    ...
}
----
====


.Grant Access to Views and Layout
[%collapsible]
====
By default, Vaadin *restricts access to all views*. Grant access using `@PermitAll`:

.MainLayout.java
[source,java]
----
import jakarta.annotation.security.PermitAll;

@Layout
// tag::snippet[]
@PermitAll
// end::snippet[]
public final class MainLayout extends AppLayout {
    ...
}
----

.MainView.java
[source,java]
----
import jakarta.annotation.security.PermitAll;

@Route
// tag::snippet[]
@PermitAll
// end::snippet[]
public final class MainView extends Main {
    ...
}
----

.TaskListView.java
[source,java]
----
import jakarta.annotation.security.PermitAll;

@Route("")
@PageTitle("Task List")
@Menu(order = 0, icon = "vaadin:clipboard-check", title = "Task List")
// tag::snippet[]
@PermitAll
// end::snippet[]
public class TaskListView extends Main {
    ...
}
----

[NOTE]
[annotationname]`@PermitAll` allows _all authenticated users_ to access the view.

====


.Test the Application
[%collapsible]
====
Restart your application to make sure all your changes have been applied. Navigate to: http://localhost:8080

You should now see the login screen. Login with one of the following credentials:

* *User:* user / *Password:* user
* *Admin:* admin / *Password:* admin

After logging in, you should be able to access the task list view.
====


.Final Thoughts
[%collapsible]
====
You have now successfully added authentication to your Vaadin application. Next, learn how to *log out users* by reading the <<../add-logout#,Add Logout>> guide.
====
