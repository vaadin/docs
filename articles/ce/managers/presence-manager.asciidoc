---
title: Presence Manager
order: 1
layout: page
---

[[ce.presence-manager]]
= Manage User Presence

Collaboration Engine includes a manager to set the user presence in a topic, keep track of the users who are currently present, and react to changes in the presence.
It provides a simple and flexible way to manage topic data related to 
user presence and makes it easy to create custom components with collaborative features.

The following example has a custom component that shows the list of active users in a topic using the presence manager:

[source,java]
----
include::{root}/src/main/java/com/vaadin/demo/ce/PresenceManagerExample.java[tags=snippet,indent=0]
----

<1> Creating a [classname]#PresenceManager# takes:
* a component to bind the  manager connection context to the UI,
* an instance of [classname]#UserInfo# that represents the current active, and
* the ID of the topic to connect to.

<2> The [methodname]#setAutoPresence()# method is used to configure the manager to set the local user as presence in the topic as soon as a connection is established.

<3> Set a callback to handle a new user joining the topic.
It gets the [classname]#UserInfo# for the new user as the parameter.
It is invoked when accessing the UI of the component used to create the manager.

<4> The callback returns another callback, a registration, that is called to remove the same user when the user leaves the topic.

<5> The [methodname]#getUsers()# method returns a stream of the currently present users in the topic.

