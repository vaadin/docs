---
title: Setup Exports to Jaeger and Prometheus
order: 2
layout: page
---

== Setup Exports to Jaeger and Prometheus

https://www.jaegertracing.io/[Jaeger] is a tool for collecting traces.
https://prometheus.io/[Prometheus] is a tool for collecting metrics.
Here we detail instructions on how to set up local Jaeger and Prometheus servers that collect telemetry from an application.

[IMPORTANT]
The setup is intended for local testing only, it is not production ready.

// tag::main-content[]

== Download and Run Jaeger

Download the latest version of Jaeger for your platform https://www.jaegertracing.io/download/[here] (tar.gz file).
Extract the contents of the downloaded archive.
Open a terminal to the Jaeger directory and start Jaeger:
[source,shell]
----
./jaeger-all-in-one
----

== Download and Run Prometheus

Download the latest version of Prometheus from your platform https://prometheus.io/download/[here] (tar.gz or zip file).
Extract the contents of the downloaded archive.

Create a Prometheus configuration with a scraper that reads metrics data from the OpenTelemetry exporter:

.`prometheus.yml`
[source,yaml]
----
global:
  scrape_interval: 15s # Default is every 1 minute.

scrape_configs:
  - job_name: 'opentelemetry'
    # metrics_path defaults to '/metrics'
    # scheme defaults to 'http'.
    static_configs:
      - targets: ['localhost:9464']
    # Host and port need to match the
    # OpenTelemetry prometheus exporter configuration
----

Open a terminal to the Prometheus directory and start Prometheus with the configuration file:

[source,shell]
----
./prometheus --config.file=/PATH/TO/prometheus.yml
----

[NOTE]
Remember to substitute the correct path to the `prometheus.yml` file.

== Create Agent Properties File

Create a new properties file named `agent.properties` and add the following lines to it:

.`*agent.properties*`
[source,properties]
----
otel.traces.exporter=jaeger
otel.exporter.jaeger.endpoint=http://localhost:14250
otel.metrics.exporter=prometheus
otel.exporter.prometheus.host=0.0.0.0
otel.exporter.prometheus.port=9464
----

// end:main-content[]

== Running the App

include::./_run-app.asciidoc[opts=optional]
