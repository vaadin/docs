---
title: OAuth2 Authentication
page-title: How to configure Vaadin and Spring Security for OAuth2 Authentication
description: Vaadin and Spring Security configuration for OAuth2 Authentication.
meta-description: Discover how to configure Vaadin to have users log in to the application by using their existing account at an OAuth 2.0 Provider (such as GitHub) or OpenID Connect 1.0 Provider (such as Google).
order: 80
---


= OAuth2 Authentication

Vaadin applications can be configured to authenticate users against existing account at an OAuth 2.0 Provider (such as GitHub) or OpenID Connect 1.0 Provider (such as Google).

This guide will focus on how to configure a Spring Boot project to integrate OAuth2 authentication in Vaadin and it assumes you are already familiar with setting up <<{articles}/flow/security/enabling-security#,Spring Security with Vaadin>>.
For detailed information about Spring Security and OAuth2, consult the https://docs.spring.io/spring-security/reference/servlet/oauth2/index.html[Spring documentation].

== Application configuration

To get started, add the `spring-security-oauth2-client` dependency to your project. When using Spring Boot, add the following starter

[.example]
--

.`Maven`
[source,xml]
----
<dependency>
	<groupId>org.springframework.boot</groupId>
	<artifactId>spring-boot-starter-oauth2-client</artifactId>
</dependency>
----

.`Gradle`
[source,groovy]
----
implementation 'org.springframework.boot:spring-boot-starter-oauth2-client'
----

--


Then add the OAuth2 provider settings to the application configuration file.
The following example shows the configuration to integrate with a https://www.keycloak.org/[Keycloak] OAuth2 provider.
To setup a test environment, refer to the <<{articles}/tools/sso/integrations/keycloak#, Keycloak Integration>> in Vaadin SSO Kit documentation.
For integration with other OAuth2 providers, refer to the https://docs.spring.io/spring-security/reference/servlet/oauth2/login/core.html#oauth2login-common-oauth2-provider[Spring Security documentation].

[.example]
--

.application.properties
[source,java]
----
spring.security.oauth2.client.registration.keycloak.provider=keycloak
spring.security.oauth2.client.registration.keycloak.client-id=my-client-id
spring.security.oauth2.client.registration.keycloak.client-secret=<<client secret>>
spring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.keycloak.scope=openid,profile

spring.security.oauth2.client.provider.keycloak.issuer-uri=http://keyclok.local:8180/realms/my-app
----

.application.yaml
[source,yaml]
----
spring:
  security:
    oauth2:
      client:
        registration:
          keycloak:
            client-id: my-client-id
            client-secret: <<client secret>>
            authorization-grant-type: authorization_code
            scope: openid,profile
        provider:
          keycloak:
            issuer-uri: http://keyclok.local:8180/realms/my-app
----

--


== Enable OAuth2 Login in Vaadin

To enable OAuth2 login in your Vaadin application, extend the [classname]`VaadinWebSecurity` class and configure the login page and post-logout redirect URI using the [methodname]`setOAuth2LoginPage` method.

Besides the [classname]`HttpSecurity` instance, the method parameters are:

1. Login Page: The URI capable of initiating the authentication request. Usually it is `/oauth2/authorization/{registrationId}`, where `registrationId` references the client registered in the application configuration file.
2. Post Logout Redirect URI: The location where the user is redirected after logout.

The post logout redirect URI can be expressed as relative or absolute URI or as a template.
The supported URI template variables are: `{baseScheme}`, `{baseHost}`, `{basePort}`, `{basePath}` and `{baseUrl}`, which is the same as `{baseScheme}://{baseHost}{basePort}{basePath}`.

[.example]
.Enable OAuth login in VaadinWebSecurity
[source,java]
----
@Configuration
class SecurityConfiguration extends VaadinWebSecurity {
    @Override
    protected void configure(HttpSecurity http) throws Exception {
        super.configure(http);
        setOAuth2LoginPage(http, 
            "/oauth2/authorization/keycloak", // (1)
            "{baseUrl}/session-ended"         // (2)
        );
    }
}
----
<1> Login page for initiating OAuth2 login with the Keycloak client.
<2> Post logout redirect URI uses a template to dynamically resolve the URL.


NOTE: The [methodname]`setOAuth2LoginPage(HttpSecurity, String)` method is a shortcut that defaults the post-logout redirect URL to `{baseUrl}`.


[discussion-id]`EF8F6AC3-BE67-4BE2-9A78-C371C1D4B9FD`
